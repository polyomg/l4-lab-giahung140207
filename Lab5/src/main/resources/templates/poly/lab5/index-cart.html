<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng</title>
</head>
<body>

<h2>GIỎ HÀNG CỦA BẠN</h2>

<table border="1" cellspacing="0" cellpadding="5">
    <tr>
        <th>MÃ</th>
        <th>TÊN SẢN PHẨM</th>
        <th>ĐƠN GIÁ</th>
        <th>SỐ LƯỢNG</th>
        <th>THÀNH TIỀN</th>
        <th>THAO TÁC</th>
    </tr>

    <!-- Lặp qua danh sách sản phẩm trong giỏ -->
    <tr th:each="item : ${cart.items}">
        <td th:text="${item.id}"></td>
        <td th:text="${item.name}"></td>
        <td th:text="${item.price}"></td>
        <td>
            <form th:action="@{'/cart/update/' + ${item.id}}" method="post">
                <input type="number" name="qty" th:value="${item.qty}" min="1" style="width:60px;">
                <button type="submit">Cập nhật</button>
            </form>
        </td>
        <td th:text="${item.amount}"></td>
        <td>
            <a th:href="@{'/cart/remove/' + ${item.id}}">Xóa</a>
        </td>
    </tr>

    <!-- Nếu giỏ hàng trống -->
    <tr th:if="${#lists.isEmpty(cart.items)}">
        <td colspan="6">Giỏ hàng đang trống!</td>
    </tr>
</table>

<hr>
<p><b>Tổng số lượng:</b> <span th:text="${cart.count}"></span></p>
<p><b>Tổng thành tiền:</b> <span th:text="${cart.amount}"></span></p>

<a href="/cart/clear">Xóa tất cả</a> |
<a href="/poly/lab5/index-product.html">Tiếp tục mua hàng</a>

</body>
</html>
